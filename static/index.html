<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Arcane Trading Command</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@500;700&family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/static/styles.css" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script type="module" src="/static/app.js" defer></script>
</head>
<body>
  <header class="hero">
    <div>
      <p class="eyebrow">Wizardry-grade quant desk</p>
      <h1>Arcane Pair & Momentum Atelier</h1>
      <p class="lede">A fresh spellbook for mean reversion, Bollinger scouts, trend sentinels, and liquidation hunters. Built anew with a dash of Hogwarts charm.</p>
      <div class="hero-actions">
        <a href="#mean-section" class="cta">Mean Reversion Lab</a>
        <a href="#bollinger-section" class="ghost">Momentum Arches</a>
        <a href="/static/liquidation-hunt.html" class="ghost">Liquidation Observatory</a>
      </div>
    </div>
    <div class="sigil">
      <div class="orb"></div>
      <div class="rune">⚡</div>
    </div>
  </header>

  <nav class="wayfinder">
    <a href="#mean-section">Mean Reversion</a>
    <a href="#bollinger-section">Bollinger Scout</a>
    <a href="#trend-section">Trend Sentinel</a>
    <a href="#rs-section">Relative Strength</a>
    <a href="#trading-section">Trading Desk</a>
    <a href="/listings" class="external">Listings Monitor ↗</a>
  </nav>

  <main class="content">
    <section id="mean-section" class="panel">
      <div class="panel-head">
        <div>
          <p class="eyebrow">Pairs desk</p>
          <h2>Mean Reversion Laboratory</h2>
          <p class="lede">Monitor spreads, trigger manual swaps, and sculpt configuration in a compact modal.</p>
        </div>
        <div class="actions">
          <button id="mr-config-open" class="ghost">Edit config</button>
          <button id="mr-sync" class="ghost">Sync balances</button>
          <button id="mr-next" class="ghost">Peek next signal</button>
          <button id="mr-start" class="cta">Start bot</button>
          <button id="mr-stop" class="danger">Stop bot</button>
        </div>
      </div>

      <div class="grid two">
        <div class="canvas">
          <div class="tile-head">
            <div>
              <p class="eyebrow">Live pulse</p>
              <h3>Status</h3>
            </div>
            <span id="mr-enabled" class="chip">-</span>
          </div>
          <div id="mr-status" class="stat-grid"></div>
        </div>

        <div class="canvas">
          <div class="tile-head">
            <div>
              <p class="eyebrow">Manual override</p>
              <h3>Swap instantly</h3>
            </div>
          </div>
          <form id="mr-manual-form" class="stacked">
            <label>
              Direction
              <select id="mr-direction"></select>
            </label>
            <div class="split">
              <label>Amount (from asset)
                <input type="number" step="0.0001" id="mr-qty" placeholder="Leave blank to use notional" />
              </label>
              <label>Notional (USD)
                <input type="number" step="0.01" id="mr-notional" placeholder="50" />
              </label>
            </div>
            <button type="submit" class="cta">Execute manual trade</button>
          </form>
        </div>
      </div>

      <div class="grid two">
        <div class="canvas">
          <div class="tile-head">
            <div>
              <p class="eyebrow">History</p>
              <h3>Spread drift</h3>
            </div>
            <span id="mr-last-refresh" class="chip subtle">-</span>
          </div>
          <canvas id="mr-chart" height="150"></canvas>
        </div>
        <div class="canvas">
          <div class="tile-head">
            <div>
              <p class="eyebrow">Ledger</p>
              <h3>Recent trades</h3>
            </div>
          </div>
          <div class="table-wrap">
            <table id="mr-trades">
              <thead><tr><th>Time</th><th>Side</th><th>Qty</th><th>Price</th><th>PNL</th></tr></thead>
              <tbody></tbody>
            </table>
          </div>
        </div>
      </div>

      <div class="canvas">
        <div class="tile-head">
          <div>
            <p class="eyebrow">Pair heartbeat</p>
            <h3>Correlation notes</h3>
          </div>
        </div>
        <div id="mr-pair-health" class="pill-rail"></div>
      </div>
    </section>

    <section id="bollinger-section" class="panel">
      <div class="panel-head">
        <div>
          <p class="eyebrow">Volatility scout</p>
          <h2>Bollinger Archways</h2>
          <p class="lede">Follow single-asset envelopes and react with swift sells.</p>
        </div>
        <div class="actions">
          <button id="boll-config-open" class="ghost">Edit config</button>
          <button id="boll-start" class="cta">Start</button>
          <button id="boll-stop" class="danger">Stop</button>
        </div>
      </div>
      <div class="grid two">
        <div class="canvas">
          <div class="tile-head">
            <div>
              <p class="eyebrow">Position</p>
              <h3>Bollinger status</h3>
            </div>
            <span id="boll-enabled" class="chip">-</span>
          </div>
          <div id="boll-status" class="stat-grid"></div>
        </div>
        <div class="canvas">
          <div class="tile-head">
            <div>
              <p class="eyebrow">Manual safeguard</p>
              <h3>Sell base asset</h3>
            </div>
          </div>
          <form id="boll-sell-form" class="stacked">
            <label>Symbol
              <input type="text" id="boll-sell-symbol" placeholder="BTCUSDT" />
            </label>
            <label>Quantity (base asset)
              <input type="number" step="0.0001" id="boll-sell-qty" />
            </label>
            <button type="submit" class="cta">Market sell</button>
          </form>
        </div>
      </div>
    </section>

    <section id="trend-section" class="panel">
      <div class="panel-head">
        <div>
          <p class="eyebrow">Momentum sentry</p>
          <h2>Trend Sentinel</h2>
          <p class="lede">EMA crossovers with ATR guardrails.</p>
        </div>
        <div class="actions">
          <button id="trend-config-open" class="ghost">Edit config</button>
          <button id="trend-start" class="cta">Start</button>
          <button id="trend-stop" class="danger">Stop</button>
        </div>
      </div>
      <div class="canvas">
        <div class="tile-head">
          <div>
            <p class="eyebrow">State</p>
            <h3>Trend status</h3>
          </div>
          <span id="trend-enabled" class="chip">-</span>
        </div>
        <div id="trend-status" class="stat-grid"></div>
      </div>
    </section>

    <section id="rs-section" class="panel">
      <div class="panel-head">
        <div>
          <p class="eyebrow">Cross-asset duel</p>
          <h2>Relative Strength Arena</h2>
          <p class="lede">Rank universes, pair longs and shorts, and rebalance on cadence.</p>
        </div>
        <div class="actions">
          <button id="rs-config-open" class="ghost">Edit config</button>
          <button id="rs-start" class="cta">Start</button>
          <button id="rs-stop" class="danger">Stop</button>
        </div>
      </div>
      <div class="grid two">
        <div class="canvas">
          <div class="tile-head">
            <div>
              <p class="eyebrow">Leaderboard</p>
              <h3>Top vs Bottom</h3>
            </div>
            <span id="rs-enabled" class="chip">-</span>
          </div>
          <div class="table-wrap">
            <table id="rs-table">
              <thead><tr><th>Tier</th><th>Symbol</th><th>RS</th><th>Price</th></tr></thead>
              <tbody></tbody>
            </table>
          </div>
        </div>
        <div class="canvas">
          <div class="tile-head">
            <div>
              <p class="eyebrow">Open spreads</p>
              <h3>Active duels</h3>
            </div>
          </div>
          <div id="rs-spreads" class="pill-rail"></div>
        </div>
      </div>
    </section>

    <section id="trading-section" class="panel">
      <div class="panel-head">
        <div>
          <p class="eyebrow">Manual wand</p>
          <h2>Trading Desk</h2>
          <p class="lede">Place ad-hoc market orders from either account.</p>
        </div>
      </div>
      <div class="grid two">
        <div class="canvas">
          <div class="tile-head">
            <div>
              <p class="eyebrow">Balances</p>
              <h3>Account overview</h3>
            </div>
          </div>
          <div id="trading-balances" class="table-wrap">
            <table>
              <thead><tr><th>Account</th><th>Asset</th><th>Free</th><th>Locked</th></tr></thead>
              <tbody></tbody>
            </table>
          </div>
        </div>
        <div class="canvas">
          <div class="tile-head">
            <div>
              <p class="eyebrow">Order spell</p>
              <h3>Market order</h3>
            </div>
          </div>
          <form id="trading-form" class="stacked">
            <label>Account
              <select id="trade-account"><option value="mr">Mean Reversion</option><option value="boll">Bollinger</option></select>
            </label>
            <label>Environment
              <select id="trade-env"><option value="true">Testnet</option><option value="false">Live</option></select>
            </label>
            <label>Symbol
              <input type="text" id="trade-symbol" placeholder="ETHUSDT" />
            </label>
            <label>Side
              <select id="trade-side"><option value="BUY">BUY</option><option value="SELL">SELL</option></select>
            </label>
            <label>Quantity (base)
              <input type="number" step="0.0001" id="trade-qty" />
            </label>
            <button type="submit" class="cta">Place order</button>
          </form>
        </div>
      </div>
    </section>
  </main>

  <div class="modal" id="mr-config-modal">
    <div class="modal-card">
      <div class="modal-head">
        <h3>Mean Reversion Config</h3>
        <button class="icon" data-close="mr-config-modal">×</button>
      </div>
      <form id="mr-config-form" class="grid two">
        <label>Pair
          <select id="mr-pair"></select>
        </label>
        <label>Poll interval (sec)
          <input type="number" id="mr-poll" min="5" />
        </label>
        <label>Window size
          <input type="number" id="mr-window" min="5" />
        </label>
        <label>Z-entry
          <input type="number" step="0.1" id="mr-entry" />
        </label>
        <label>Z-exit
          <input type="number" step="0.1" id="mr-exit" />
        </label>
        <label>Trade notional (USD)
          <input type="number" step="1" id="mr-notional-usd" />
        </label>
        <label class="checkbox">
          <input type="checkbox" id="mr-use-all" /> Use all balance
        </label>
        <label class="checkbox">
          <input type="checkbox" id="mr-use-testnet" /> Use testnet
        </label>
        <label class="checkbox">
          <input type="checkbox" id="mr-use-ratio" /> Use ratio thresholds
        </label>
        <label>Sell ratio threshold
          <input type="number" step="0.0001" id="mr-sell-th" />
        </label>
        <label>Buy ratio threshold
          <input type="number" step="0.0001" id="mr-buy-th" />
        </label>
        <div class="full-row modal-actions">
          <button type="button" id="mr-config-best" class="ghost">Suggest from history</button>
          <div>
            <button type="button" class="ghost" data-close="mr-config-modal">Cancel</button>
            <button type="submit" class="cta">Save</button>
          </div>
        </div>
      </form>
    </div>
  </div>

  <div class="modal" id="boll-config-modal">
    <div class="modal-card">
      <div class="modal-head">
        <h3>Bollinger Config</h3>
        <button class="icon" data-close="boll-config-modal">×</button>
      </div>
      <form id="boll-config-form" class="grid two">
        <label>Symbol
          <input type="text" id="boll-symbol" />
        </label>
        <label>Poll interval (sec)
          <input type="number" id="boll-poll" />
        </label>
        <label>Window size
          <input type="number" id="boll-window" />
        </label>
        <label>Std devs
          <input type="number" step="0.1" id="boll-std" />
        </label>
        <label>Max position (USD)
          <input type="number" id="boll-max" />
        </label>
        <label>Cooldown (sec)
          <input type="number" id="boll-cool" />
        </label>
        <label>Stop loss %
          <input type="number" step="0.01" id="boll-sl" />
        </label>
        <label>Take profit %
          <input type="number" step="0.01" id="boll-tp" />
        </label>
        <label class="checkbox">
          <input type="checkbox" id="boll-use-all" /> Use full balance
        </label>
        <label class="checkbox">
          <input type="checkbox" id="boll-testnet" /> Use testnet
        </label>
        <div class="full-row modal-actions">
          <button type="button" class="ghost" data-close="boll-config-modal">Cancel</button>
          <button type="submit" class="cta">Save</button>
        </div>
      </form>
    </div>
  </div>

  <div class="modal" id="trend-config-modal">
    <div class="modal-card">
      <div class="modal-head">
        <h3>Trend Config</h3>
        <button class="icon" data-close="trend-config-modal">×</button>
      </div>
      <form id="trend-config-form" class="grid two">
        <label>Symbol
          <input type="text" id="trend-symbol" />
        </label>
        <label>Poll interval (sec)
          <input type="number" id="trend-poll" />
        </label>
        <label>Fast EMA window
          <input type="number" id="trend-fast" />
        </label>
        <label>Slow EMA window
          <input type="number" id="trend-slow" />
        </label>
        <label>ATR window
          <input type="number" id="trend-atr" />
        </label>
        <label class="checkbox">
          <input type="checkbox" id="trend-testnet" /> Use testnet
        </label>
        <div class="full-row modal-actions">
          <button type="button" class="ghost" data-close="trend-config-modal">Cancel</button>
          <button type="submit" class="cta">Save</button>
        </div>
      </form>
    </div>
  </div>

  <div class="modal" id="rs-config-modal">
    <div class="modal-card">
      <div class="modal-head">
        <h3>Relative Strength Config</h3>
        <button class="icon" data-close="rs-config-modal">×</button>
      </div>
      <form id="rs-config-form" class="grid two">
        <label>Symbols (comma separated)
          <input type="text" id="rs-symbols" />
        </label>
        <label>Poll interval (sec)
          <input type="number" id="rs-poll" />
        </label>
        <label>Lookback window
          <input type="number" id="rs-lookback" />
        </label>
        <label>Rebalance interval (sec)
          <input type="number" id="rs-rebalance" />
        </label>
        <label>Top N
          <input type="number" id="rs-top" />
        </label>
        <label>Bottom N
          <input type="number" id="rs-bottom" />
        </label>
        <label>Min RS gap
          <input type="number" step="0.01" id="rs-gap" />
        </label>
        <label>Max notional (USD)
          <input type="number" id="rs-max-notional" />
        </label>
        <label class="checkbox">
          <input type="checkbox" id="rs-all" /> Use all balance
        </label>
        <label class="checkbox">
          <input type="checkbox" id="rs-testnet" /> Use testnet
        </label>
        <div class="full-row modal-actions">
          <button type="button" class="ghost" data-close="rs-config-modal">Cancel</button>
          <button type="submit" class="cta">Save</button>
        </div>
      </form>
    </div>
  </div>

  <div id="toast"></div>
</body>
</html>
